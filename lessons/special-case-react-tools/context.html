<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Context – Complete Intro to React v6</title><meta name="description" content="The Complete Intro to React v6, rewritten in Next.js"/><meta name="og:description" content="The Complete Intro to React v6, rewritten in Next.js"/><meta name="og:title" content="Context – Complete Intro to React v6"/><meta name="og:image" content="/next-react-v6/images/social-share-cover.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="next-head-count" content="8"/><link rel="preload" href="/next-react-v6/_next/static/css/dd3a156ae8df4e80.css" as="style"/><link rel="stylesheet" href="/next-react-v6/_next/static/css/dd3a156ae8df4e80.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/next-react-v6/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/next-react-v6/_next/static/chunks/webpack-be94a71f231b8231.js" defer=""></script><script src="/next-react-v6/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/next-react-v6/_next/static/chunks/main-b4b46623d1c4828d.js" defer=""></script><script src="/next-react-v6/_next/static/chunks/pages/_app-1998ed02ab0f29fd.js" defer=""></script><script src="/next-react-v6/_next/static/chunks/pages/lessons/%5Bsection%5D/%5Bslug%5D-e8dbac36043f1b59.js" defer=""></script><script src="/next-react-v6/_next/static/NryK5gNhI6Oem6D3X2Z84/_buildManifest.js" defer=""></script><script src="/next-react-v6/_next/static/NryK5gNhI6Oem6D3X2Z84/_ssgManifest.js" defer=""></script><script src="/next-react-v6/_next/static/NryK5gNhI6Oem6D3X2Z84/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="remix-app"><header class="navbar"><h1 class="navbar-brand"><a href="/next-react-v6">Complete Intro to React v6</a></h1><div class="navbar-info"><a href="https://frontendmasters.com/courses/complete-react-v6/" class="cta-btn">Watch on Frontend Masters</a></div></header><div class="content-container"><div class="main"><div class="lesson-container"><div class="lesson"><div class="lesson-content"><p>Historically I have not taught context when teaching React. This was for a couple reasons. First of all, the API they were using was still unofficial, however they standardized it in version 16. Secondly, normally you don&#39;t need context; React&#39;s state is enough. Thirdly, the old API was bad, in my opinion. The new one is pretty good.</p>
<p>So here we go. What is context? Context is like state, but instead of being confined to a component, it&#39;s global to your application. It&#39;s application-level state. This is dangerous. Avoid using context until you <em>have</em> to use it. One of React&#39;s primary benefit is it makes the flow of data obvious by being explicit. This can make it cumbersome at times but it&#39;s worth it because your code stays legible and understandable. Things like context obscure it.</p>
<p>Context (mostly) replaces Redux. Well, typically. It fills the same need as Redux. I really can&#39;t see why you would need to use both. Use one or the other.</p>
<p>Again, this is a contrived example. What we&#39;re doing here is overkill and should be accomplished via React&#39;s normal patterns. A better example would be something like a user&#39;s logged-in information. But let&#39;s check out what this looks like with theme.</p>
<p>Imagine if we wanted to let the user choose a simple theme for the site. And we want to make that theme stick as the user navigates across different pages. This means the state has to live outside of the route where it&#39;s selected. We could use Redux for this, we could use React itself, or we&#39;re going to use context, to teach you what that looks like.</p>
<p>Make a new file called ThemeContext.js:</p>
<pre><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { createContext } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">ThemeContext</span> = <span class="hljs-title function_">createContext</span>([<span class="hljs-string">&quot;green&quot;</span>, <span class="hljs-function">() =&gt;</span> {}]);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ThemeContext</span>;
</code></pre>
<p><code>createContext</code> is a function that returns an object with two React components in it: a Provider and a Consumer. A Provider is how you scope where a context goes. A context will only be available inside of the Provider. You only need to do this once.</p>
<p>A Consumer is how you consume from the above provider. A Consumer accepts a function as a child and gives it the context which you can use. We won&#39;t be using the Consumer directly: a function called <code>useContext</code> will do that for us.</p>
<p>The object provided to context is the default state it uses when it can find no Provider above it, useful if there&#39;s a chance no provider will be there and for testing. It&#39;s also useful for TypeScript because TypeScript will enforce these types. Here we&#39;re giving it the shape of a <code>useState</code> call because we&#39;ll using <code>useState</code> with it. You do not have to use context with hooks; <a href="https://btholt.github.io/complete-intro-to-react-v4/context">see v4</a> if you want to see how to do it without hooks. That example also has a more complicated data shape. This example is a lot more simple. If you wanted a more complicated data shape, you&#39;d replace <code>&quot;green&quot;</code> with an object full of other properties.</p>
<p>Now we&#39;re going to make all the buttons&#39; background color in the app be governed by the theme. First let&#39;s go to App.js:</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// import useState and ThemeContext</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">StrictMode</span>, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ThemeContext</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./ThemeContext&quot;</span>;

<span class="hljs-comment">// top of App function body</span>
<span class="hljs-keyword">const</span> theme = <span class="hljs-title function_">useState</span>(<span class="hljs-string">&quot;darkblue&quot;</span>);

<span class="hljs-comment">// wrap the rest of the app</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{theme}</span>&gt;</span>[…]<span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Provider</span>&gt;</span></span>;
</code></pre>
<ul>
<li>We&#39;re going to use the <code>useState</code> hook because theme is actually going to be kept track of like any other piece of state: it&#39;s not any different. You can think of context like a wormhole: whatever you chuck in one side of the wormhole is going to come out the other side.</li>
<li>You have to wrap your app in a <code>Provider</code>. This is the mechanism by which React will notify the higher components to re-render whenever our context changes. Then whatever you pass into the value prop (we passed in the complete hook, the value and updater pair) will exit on the other side whenever we ask for it.</li>
<li>Note that the theme will only be available <em>inside</em> of this provider. So if we only wrapped the <code>&lt;Details&gt;</code> route with the Provider, that context would not be available inside of <code>&lt;SearchParams /&gt;</code>.</li>
<li>Side note: if your context is <em>read only</em> (meaning it will <em>never change</em>) you actually can skip wrapping your app in a Provider.</li>
</ul>
<p>Next let&#39;s go to <code>SearchParams.js</code>:</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// import at top</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect, useContext } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ThemeContext</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./ThemeContext&quot;</span>;

<span class="hljs-comment">// top of SearchParams function body</span>
<span class="hljs-keyword">const</span> [theme] = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ThemeContext</span>);

<span class="hljs-comment">// replace button</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">theme</span> }}&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
</code></pre>
<ul>
<li>Now your button should be a beautiful shade of <code>darkblue</code>.</li>
<li><code>useContext</code> is how you get the context data out of a given context (you can lots of various types of context in a given app.)</li>
<li>Right now it&#39;s just reading from it and a pretty silly use of context. But let&#39;s go make Details.js use it as well.</li>
</ul>
<p>Let&#39;s go do this in Details.js</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// import</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ThemeContext</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./ThemeContext&quot;</span>;

<span class="hljs-comment">// replace button</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ThemeContext.Consumer</span>&gt;</span>
  {([theme]) =&gt; (
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">backgroundColor:</span> <span class="hljs-attr">theme</span> }}&gt;</span>Adopt {name}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  )}
<span class="hljs-tag">&lt;/<span class="hljs-name">ThemeContext.Consumer</span>&gt;</span></span>;
</code></pre>
<ul>
<li>This is how you use context inside of a class component.</li>
<li>Remember you cannot use hooks inside class components at all. This is why we&#39;re using the <code>Consumer</code> from <code>ThemeContext</code>. Functionally this works the same way though.</li>
</ul>
<p>Lastly let&#39;s go make the theme changeable. Head back to SearchParams.js.</p>
<pre><code class="hljs language-javascript"><span class="hljs-comment">// also grab setTheme</span>
<span class="hljs-keyword">const</span> [theme, setTheme] = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ThemeContext</span>);

<span class="hljs-comment">// below BreedDropdown</span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">htmlFor</span>=<span class="hljs-string">&quot;theme&quot;</span>&gt;</span>
  Theme
  <span class="hljs-tag">&lt;<span class="hljs-name">select</span>
    <span class="hljs-attr">value</span>=<span class="hljs-string">{theme}</span>
    <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setTheme(e.target.value)}
    onBlur={(e) =&gt; setTheme(e.target.value)}
  &gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;peru&quot;</span>&gt;</span>Peru<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;darkblue&quot;</span>&gt;</span>Dark Blue<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;chartreuse&quot;</span>&gt;</span>Chartreuse<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;mediumorchid&quot;</span>&gt;</span>Medium Orchid<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span>;
</code></pre>
<ul>
<li>This looks relatively similar to hooks, right? It should because it works the same!</li>
<li>Now try changing the theme and navigating to a pet page. Notice the theme is consistent! The theme is kept between pages because it&#39;s kept at the App level and App is never unmounted so its state persists between route changes.</li>
<li>You can have multiple layers of context. If I wrapped SearchParams in its own <code>Provider</code> (in addition to the one that already exists), the SearchParams context would read from that because it&#39;s the closest one whereas Details would read from the top level one because it&#39;s the only one.</li>
</ul>
<p>That&#39;s it for context! Something like theming would be perfect for context. It&#39;s for app-level data. Everything else should be boring-ol&#39; state.</p>
<blockquote>
<p>🏁 <a href="https://github.com/btholt/citr-v6-project/tree/master/11-context">Click here to see the state of the project up until now: 11-context</a></p>
</blockquote>
</div><div class="lesson-links"><a href="/next-react-v6/lessons/special-case-react-tools/error-boundaries" class="prev">← Previous</a><a href="/next-react-v6/lessons/special-case-react-tools/portals-and-refs" class="next">Next →</a></div></div><div class="details-bg"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="154" height="154" viewBox="0 0 154 154"><defs><clipPath id="clip-path"><rect id="Rectangle_2238" data-name="Rectangle 2238" width="154" height="154" transform="translate(9467 350)" fill="#fff" stroke="#707070" stroke-width="1"></rect></clipPath><clipPath id="clip-corner-image-active"><rect width="154" height="154"></rect></clipPath></defs><g id="corner-image-active" clip-path="url(#clip-corner-image-active)"><g id="Corner-image-active-2" data-name="Corner-image-active" transform="translate(-9467 -350)" clip-path="url(#clip-path)"><path id="Subtraction_34" data-name="Subtraction 34" d="M-3857.365,1740.766h0l-7.07-7.07,12.89-12.89v14.142l-5.818,5.818Zm-14.142-14.142h0l-7.071-7.07,27.033-27.033v14.143l-19.96,19.96Zm-14.143-14.143h0l-7.07-7.069,41.175-41.175v14.142Zm-14.142-14.142h0l-7.07-7.069,55.317-55.317v14.142Zm-14.142-14.142h0l-7.07-7.069,69.459-69.459v14.142Zm-14.142-14.142h0l-7.07-7.069,76.739-76.739h6.862v7.28Zm-14.143-14.143h0l-7.07-7.069,62.6-62.6h14.142Zm-14.142-14.142h0l-7.07-7.069,48.454-48.454h14.142Zm-14.142-14.142h0l-7.07-7.069,34.312-34.312h14.142Zm-14.142-14.142h0l-7.07-7.069,20.17-20.17h14.142Zm-14.142-14.142h0l-7.071-7.071,6.027-6.027h14.144l-13.1,13.1Zm367.24-56.114v-.909l.455.455-.453.453Z" transform="translate(13472.546 -1236.766)" fill="var(--corner-fill)"></path></g></g></svg></div></div></div></div><footer class="footer"><ul class="socials"><li class="social"><a href="https://twitter.com/holtbt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="40" height="32" viewBox="0 0 40 32"><defs><clipPath id="clip-twitter-social"><rect width="40" height="32"></rect></clipPath></defs><g id="twitter-social" clip-path="url(#clip-twitter-social)"><g id="Group_269" data-name="Group 269" transform="translate(-230.23 -1140.849)"><path id="Path_419" data-name="Path 419" d="M266.12,1148.861v1.035a23.092,23.092,0,0,1-1.507,8.1,24.08,24.08,0,0,1-4.475,7.381,22.175,22.175,0,0,1-7.306,5.4,24.129,24.129,0,0,1-10,2.07,23.7,23.7,0,0,1-6.667-.945,22.83,22.83,0,0,1-5.936-2.655q.959.091,1.963.09a16.518,16.518,0,0,0,5.434-.9,17.111,17.111,0,0,0,4.749-2.52,8.275,8.275,0,0,1-4.749-1.643,7.8,7.8,0,0,1-2.877-3.983,8.268,8.268,0,0,0,1.507.135,8.58,8.58,0,0,0,2.146-.27,8.16,8.16,0,0,1-5.685-4.344,8.326,8.326,0,0,1-.89-3.578v-.135a7.775,7.775,0,0,0,3.744,1.035,8.183,8.183,0,0,1-2.671-2.9,7.817,7.817,0,0,1-.982-3.848,7.948,7.948,0,0,1,1.1-4.05,23.53,23.53,0,0,0,16.895,8.46,9.221,9.221,0,0,1-.183-1.845,7.787,7.787,0,0,1,1.1-4.05,8.216,8.216,0,0,1,2.991-2.948,7.991,7.991,0,0,1,4.087-1.1,8.184,8.184,0,0,1,5.982,2.566,16.087,16.087,0,0,0,5.205-1.98,7.784,7.784,0,0,1-1.393,2.588,8.4,8.4,0,0,1-2.215,1.913,16.856,16.856,0,0,0,4.749-1.305A17.032,17.032,0,0,1,266.12,1148.861Z" fill="var(--icons)"></path></g></g></svg></a></li><li class="social"><a href="https://github.com/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-github-social"><rect width="32" height="32"></rect></clipPath></defs><g id="github-social" clip-path="url(#clip-github-social)"><g id="Group_272" data-name="Group 272" transform="translate(13522.5 -6994)"><path id="Subtraction_33" data-name="Subtraction 33" d="M-24967.5,8041a15.9,15.9,0,0,1-11.312-4.688A15.893,15.893,0,0,1-24983.5,8025a15.893,15.893,0,0,1,4.689-11.315A15.894,15.894,0,0,1-24967.5,8009a15.894,15.894,0,0,1,11.313,4.686A15.893,15.893,0,0,1-24951.5,8025a15.893,15.893,0,0,1-4.689,11.313A15.9,15.9,0,0,1-24967.5,8041Zm-3.781-4.571h0v3.918h7.895v-6.665a1.836,1.836,0,0,0-1.2-1.718c5.1-.617,7.467-2.975,7.467-7.424a7.176,7.176,0,0,0-1.637-4.728,6.74,6.74,0,0,0,.275-1.812,4.34,4.34,0,0,0-.52-2.452.574.574,0,0,0-.359-.1c-1.061,0-3.465,1.411-3.936,1.694a16.644,16.644,0,0,0-4.2-.489,16.379,16.379,0,0,0-3.969.445c-.846-.5-2.91-1.649-3.859-1.649a.566.566,0,0,0-.354.095,4.3,4.3,0,0,0-.521,2.452,6.7,6.7,0,0,0,.244,1.718,7.346,7.346,0,0,0-1.6,4.822,7.263,7.263,0,0,0,1.533,4.985c1.193,1.359,3.115,2.165,5.871,2.464a1.826,1.826,0,0,0-1.129,1.693v.5h0l-.006,0a7.121,7.121,0,0,1-2.033.363,2.608,2.608,0,0,1-.965-.158,4.438,4.438,0,0,1-1.836-1.881,2.361,2.361,0,0,0-1.248-1.091,3.472,3.472,0,0,0-1.217-.3.584.584,0,0,0-.545.224.282.282,0,0,0,.027.367,1.875,1.875,0,0,0,.447.307,4.732,4.732,0,0,1,.561.355,10.726,10.726,0,0,1,1.682,2.755c.043.092.078.163.105.217a3.876,3.876,0,0,0,2.42,1.185,6.036,6.036,0,0,0,.607.025c.875,0,1.988-.124,2-.125Z" transform="translate(11461 -1015)" fill="var(--icons)"></path><g id="Ellipse_670" data-name="Ellipse 670" transform="translate(-13522.5 6994)" fill="none" stroke="var(--icons)" stroke-width="1"><circle cx="16" cy="16" r="16" stroke="none"></circle><circle cx="16" cy="16" r="15.5" fill="none"></circle></g></g></g></svg></a></li><li class="social"><a href="https://linkedin.com/in/btholt"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32"><defs><clipPath id="clip-linkedin-social"><rect width="32" height="32"></rect></clipPath></defs><g id="linkedin-social" clip-path="url(#clip-linkedin-social)"><g id="Group_270" data-name="Group 270" transform="translate(-86.349 -633.073)"><path id="Path_375" data-name="Path 375" d="M115.789,633.073a2.324,2.324,0,0,1,1.682.676,2.194,2.194,0,0,1,.695,1.627V662.8a2.131,2.131,0,0,1-.695,1.609,2.314,2.314,0,0,1-1.646.659H88.69a2.307,2.307,0,0,1-1.646-.659,2.128,2.128,0,0,1-.695-1.609V635.376a2.19,2.19,0,0,1,.695-1.627,2.322,2.322,0,0,1,1.682-.676h27.063Zm-20.224,9.672a2.561,2.561,0,0,0,0-3.584,2.658,2.658,0,0,0-1.938-.712,2.724,2.724,0,0,0-1.957.712,2.371,2.371,0,0,0-.75,1.792,2.4,2.4,0,0,0,.731,1.792,2.605,2.605,0,0,0,1.9.713h.037A2.7,2.7,0,0,0,95.565,642.745ZM96,645.434H91.213V659.88H96Zm17.3,6.144a7.007,7.007,0,0,0-1.573-4.9,5.68,5.68,0,0,0-6.839-.769,5.663,5.663,0,0,0-1.426,1.573v-2.048H98.674q.036.841,0,7.717v6.728h4.791V651.8a3.592,3.592,0,0,1,.146-1.17,2.913,2.913,0,0,1,.878-1.206,2.429,2.429,0,0,1,1.609-.549,2.108,2.108,0,0,1,1.865.914,4.265,4.265,0,0,1,.549,2.341v7.752H113.3Z" fill="var(--icons)"></path></g></g></svg></a></li><li class="social"><div class="terms"><p>Content Licensed Under CC-BY-NC-4.0</p><p>Code Samples and Excercises Licensed Under Apache 2.0</p><p>Site Designed by<!-- --> <a href="https://www.alexdanielson.com/">Alex Danielson</a></p></div></li></ul></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"attributes":{"description":""},"html":"\u003cp\u003eHistorically I have not taught context when teaching React. This was for a couple reasons. First of all, the API they were using was still unofficial, however they standardized it in version 16. Secondly, normally you don\u0026#39;t need context; React\u0026#39;s state is enough. Thirdly, the old API was bad, in my opinion. The new one is pretty good.\u003c/p\u003e\n\u003cp\u003eSo here we go. What is context? Context is like state, but instead of being confined to a component, it\u0026#39;s global to your application. It\u0026#39;s application-level state. This is dangerous. Avoid using context until you \u003cem\u003ehave\u003c/em\u003e to use it. One of React\u0026#39;s primary benefit is it makes the flow of data obvious by being explicit. This can make it cumbersome at times but it\u0026#39;s worth it because your code stays legible and understandable. Things like context obscure it.\u003c/p\u003e\n\u003cp\u003eContext (mostly) replaces Redux. Well, typically. It fills the same need as Redux. I really can\u0026#39;t see why you would need to use both. Use one or the other.\u003c/p\u003e\n\u003cp\u003eAgain, this is a contrived example. What we\u0026#39;re doing here is overkill and should be accomplished via React\u0026#39;s normal patterns. A better example would be something like a user\u0026#39;s logged-in information. But let\u0026#39;s check out what this looks like with theme.\u003c/p\u003e\n\u003cp\u003eImagine if we wanted to let the user choose a simple theme for the site. And we want to make that theme stick as the user navigates across different pages. This means the state has to live outside of the route where it\u0026#39;s selected. We could use Redux for this, we could use React itself, or we\u0026#39;re going to use context, to teach you what that looks like.\u003c/p\u003e\n\u003cp\u003eMake a new file called ThemeContext.js:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { createContext } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eThemeContext\u003c/span\u003e = \u003cspan class=\"hljs-title function_\"\u003ecreateContext\u003c/span\u003e([\u003cspan class=\"hljs-string\"\u003e\u0026quot;green\u0026quot;\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e() =\u0026gt;\u003c/span\u003e {}]);\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eThemeContext\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003ecreateContext\u003c/code\u003e is a function that returns an object with two React components in it: a Provider and a Consumer. A Provider is how you scope where a context goes. A context will only be available inside of the Provider. You only need to do this once.\u003c/p\u003e\n\u003cp\u003eA Consumer is how you consume from the above provider. A Consumer accepts a function as a child and gives it the context which you can use. We won\u0026#39;t be using the Consumer directly: a function called \u003ccode\u003euseContext\u003c/code\u003e will do that for us.\u003c/p\u003e\n\u003cp\u003eThe object provided to context is the default state it uses when it can find no Provider above it, useful if there\u0026#39;s a chance no provider will be there and for testing. It\u0026#39;s also useful for TypeScript because TypeScript will enforce these types. Here we\u0026#39;re giving it the shape of a \u003ccode\u003euseState\u003c/code\u003e call because we\u0026#39;ll using \u003ccode\u003euseState\u003c/code\u003e with it. You do not have to use context with hooks; \u003ca href=\"https://btholt.github.io/complete-intro-to-react-v4/context\"\u003esee v4\u003c/a\u003e if you want to see how to do it without hooks. That example also has a more complicated data shape. This example is a lot more simple. If you wanted a more complicated data shape, you\u0026#39;d replace \u003ccode\u003e\u0026quot;green\u0026quot;\u003c/code\u003e with an object full of other properties.\u003c/p\u003e\n\u003cp\u003eNow we\u0026#39;re going to make all the buttons\u0026#39; background color in the app be governed by the theme. First let\u0026#39;s go to App.js:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// import useState and ThemeContext\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { \u003cspan class=\"hljs-title class_\"\u003eStrictMode\u003c/span\u003e, useState } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eThemeContext\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;./ThemeContext\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// top of App function body\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e theme = \u003cspan class=\"hljs-title function_\"\u003euseState\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\u0026quot;darkblue\u0026quot;\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// wrap the rest of the app\u003c/span\u003e\n\u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eThemeContext.Provider\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{theme}\u003c/span\u003e\u0026gt;\u003c/span\u003e[…]\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eThemeContext.Provider\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eWe\u0026#39;re going to use the \u003ccode\u003euseState\u003c/code\u003e hook because theme is actually going to be kept track of like any other piece of state: it\u0026#39;s not any different. You can think of context like a wormhole: whatever you chuck in one side of the wormhole is going to come out the other side.\u003c/li\u003e\n\u003cli\u003eYou have to wrap your app in a \u003ccode\u003eProvider\u003c/code\u003e. This is the mechanism by which React will notify the higher components to re-render whenever our context changes. Then whatever you pass into the value prop (we passed in the complete hook, the value and updater pair) will exit on the other side whenever we ask for it.\u003c/li\u003e\n\u003cli\u003eNote that the theme will only be available \u003cem\u003einside\u003c/em\u003e of this provider. So if we only wrapped the \u003ccode\u003e\u0026lt;Details\u0026gt;\u003c/code\u003e route with the Provider, that context would not be available inside of \u003ccode\u003e\u0026lt;SearchParams /\u0026gt;\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003eSide note: if your context is \u003cem\u003eread only\u003c/em\u003e (meaning it will \u003cem\u003enever change\u003c/em\u003e) you actually can skip wrapping your app in a Provider.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eNext let\u0026#39;s go to \u003ccode\u003eSearchParams.js\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// import at top\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eReact\u003c/span\u003e, { useState, useEffect, useContext } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;react\u0026quot;\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eThemeContext\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;./ThemeContext\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// top of SearchParams function body\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [theme] = \u003cspan class=\"hljs-title function_\"\u003euseContext\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eThemeContext\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// replace button\u003c/span\u003e\n\u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ebackgroundColor:\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etheme\u003c/span\u003e }}\u0026gt;\u003c/span\u003eSubmit\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eNow your button should be a beautiful shade of \u003ccode\u003edarkblue\u003c/code\u003e.\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003euseContext\u003c/code\u003e is how you get the context data out of a given context (you can lots of various types of context in a given app.)\u003c/li\u003e\n\u003cli\u003eRight now it\u0026#39;s just reading from it and a pretty silly use of context. But let\u0026#39;s go make Details.js use it as well.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eLet\u0026#39;s go do this in Details.js\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// import\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eThemeContext\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026quot;./ThemeContext\u0026quot;\u003c/span\u003e;\n\n\u003cspan class=\"hljs-comment\"\u003e// replace button\u003c/span\u003e\n\u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eThemeContext.Consumer\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  {([theme]) =\u0026gt; (\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003estyle\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{{\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ebackgroundColor:\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003etheme\u003c/span\u003e }}\u0026gt;\u003c/span\u003eAdopt {name}\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003ebutton\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  )}\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eThemeContext.Consumer\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eThis is how you use context inside of a class component.\u003c/li\u003e\n\u003cli\u003eRemember you cannot use hooks inside class components at all. This is why we\u0026#39;re using the \u003ccode\u003eConsumer\u003c/code\u003e from \u003ccode\u003eThemeContext\u003c/code\u003e. Functionally this works the same way though.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eLastly let\u0026#39;s go make the theme changeable. Head back to SearchParams.js.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// also grab setTheme\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e [theme, setTheme] = \u003cspan class=\"hljs-title function_\"\u003euseContext\u003c/span\u003e(\u003cspan class=\"hljs-title class_\"\u003eThemeContext\u003c/span\u003e);\n\n\u003cspan class=\"hljs-comment\"\u003e// below BreedDropdown\u003c/span\u003e\n\u003cspan class=\"language-xml\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003ehtmlFor\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;theme\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  Theme\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eselect\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{theme}\u003c/span\u003e\n    \u003cspan class=\"hljs-attr\"\u003eonChange\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e{(e)\u003c/span\u003e =\u0026gt;\u003c/span\u003e setTheme(e.target.value)}\n    onBlur={(e) =\u0026gt; setTheme(e.target.value)}\n  \u0026gt;\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eoption\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;peru\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003ePeru\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eoption\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eoption\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;darkblue\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003eDark Blue\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eoption\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eoption\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;chartreuse\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003eChartreuse\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eoption\u003c/span\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"hljs-tag\"\u003e\u0026lt;\u003cspan class=\"hljs-name\"\u003eoption\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003evalue\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\u0026quot;mediumorchid\u0026quot;\u003c/span\u003e\u0026gt;\u003c/span\u003eMedium Orchid\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eoption\u003c/span\u003e\u0026gt;\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003eselect\u003c/span\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"hljs-tag\"\u003e\u0026lt;/\u003cspan class=\"hljs-name\"\u003elabel\u003c/span\u003e\u0026gt;\u003c/span\u003e\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eThis looks relatively similar to hooks, right? It should because it works the same!\u003c/li\u003e\n\u003cli\u003eNow try changing the theme and navigating to a pet page. Notice the theme is consistent! The theme is kept between pages because it\u0026#39;s kept at the App level and App is never unmounted so its state persists between route changes.\u003c/li\u003e\n\u003cli\u003eYou can have multiple layers of context. If I wrapped SearchParams in its own \u003ccode\u003eProvider\u003c/code\u003e (in addition to the one that already exists), the SearchParams context would read from that because it\u0026#39;s the closest one whereas Details would read from the top level one because it\u0026#39;s the only one.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThat\u0026#39;s it for context! Something like theming would be perfect for context. It\u0026#39;s for app-level data. Everything else should be boring-ol\u0026#39; state.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e🏁 \u003ca href=\"https://github.com/btholt/citr-v6-project/tree/master/11-context\"\u003eClick here to see the state of the project up until now: 11-context\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n","slug":"context","title":"Context","section":"Special Case React Tools","icon":"bolt","filePath":"/home/runner/work/next-react-v6/next-react-v6/lessons/06-special-case-react-tools/B-context.md","nextSlug":"/next-react-v6/lessons/special-case-react-tools/portals-and-refs","prevSlug":"/next-react-v6/lessons/special-case-react-tools/error-boundaries"}},"__N_SSG":true},"page":"/lessons/[section]/[slug]","query":{"section":"special-case-react-tools","slug":"context"},"buildId":"NryK5gNhI6Oem6D3X2Z84","assetPrefix":"/next-react-v6","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>